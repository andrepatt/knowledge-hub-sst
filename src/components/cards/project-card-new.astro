---
import { Icon } from "astro-icon/components"
import { Image } from "astro:assets"
import type { CollectionEntry } from "astro:content"

// Supponiamo che la collezione si chiami "projects".
type Props = CollectionEntry<"projects">

const post = Astro.props
---

<a
  href={`/projects/${post.slug}/`}
  class="
    group 
    relative 
    block 
    w-full 
    flex 
    flex-col 
    gap-4 
    p-4 
    bg-white 
    border 
    border-zinc-200 
    rounded-lg 
    transition-shadow 
    duration-300 
    hover:shadow-md 
    hover:bg-gray-50
    md:flex-row
  "
>
  <!-- Categoria in alto a destra -->
{post.data.category && (
    <span
        class="
            absolute top-3 right-3
            px-4 py-2
            text-xs font-mono tracking-tight
            rounded 
            border border-black
            bg-black
            text-white
            shadow-sm
            transition-transform 
            duration-200
            group-hover:scale-105
            capitalize
            font-bold
        "
    >
      {post.data.category}
    </span>
  )}

  <!-- Immagine (a sinistra su desktop, in alto su mobile) -->
  <div class="rounded-lg overflow-hidden md:w-[260px] flex-shrink-0">
    <Image
      loading="eager"
      src={post.data.cover}
      alt={post.data.title || "Progetto senza titolo"}
      class="w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105"
      width="640"
      height="360"
    />
  </div>

  <!-- Testo (a destra su desktop, in basso su mobile) -->
  <div class="flex w-full flex-col justify-between">
    <!-- Data pubblicazione -->
    <p class="text-sm text-zinc-500">
      {post.data.pubDate}
    </p>

    <!-- Titolo -->
    <p
      class="font-display mt-1 line-clamp-2 text-xl font-semibold leading-[1.3] text-zinc-800"
    >
      {post.data.title}
    </p>

    <!-- Descrizione -->
    <p class="mt-1 line-clamp-2 text-zinc-600">
      {post.data.description}
    </p>

    <!-- “Read more” con underline animato -->
    <div class="mt-2">
      <span
        class="
          relative inline-flex items-center text-blue-500 text-sm
          after:content-[''] 
          after:absolute 
          after:-bottom-0.5 
          after:left-0 
          after:h-[2px] 
          after:w-0
          after:bg-blue-500
          after:transition-all 
          after:duration-300
          group-hover:after:w-full
        "
      >
        Read more
        <Icon
          name="lucide:arrow-right"
          class="ml-1 inline-block transition-all duration-300 group-hover:ml-2"
        />
      </span>
    </div>
  </div>
</a>
